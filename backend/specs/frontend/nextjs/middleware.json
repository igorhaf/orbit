{
  "id": "nextjs-middleware",
  "category": "frontend",
  "name": "nextjs",
  "spec_type": "middleware",
  "title": "Middleware",
  "description": "Next.js middleware for route protection and rewrites",
  "content": "import { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  // Check authentication\n  const token = request.cookies.get('token')?.value\n\n  // Redirect to login if not authenticated\n  if (!token && !request.nextUrl.pathname.startsWith('/login')) {\n    return NextResponse.redirect(new URL('/login', request.url))\n  }\n\n  // Add custom headers\n  const response = NextResponse.next()\n  response.headers.set('x-custom-header', 'value')\n\n  return response\n}\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - public folder\n     */\n    '/((?!_next/static|_next/image|favicon.ico|public).*)',\n  ],\n}",
  "language": "typescript",
  "framework_version": null,
  "ignore_patterns": [
    "node_modules/*",
    ".next/*"
  ],
  "file_extensions": [
    "ts"
  ],
  "is_active": true,
  "metadata": {
    "created_at": "2025-12-29T10:00:32.556881Z",
    "updated_at": "2025-12-29T10:00:32.556881Z"
  }
}